#pragma once
#include <string>

// ------------------------------------------------------------
// BMS 1ノーツ情報
//  ・通常ノーツ（11〜19, 21〜29）
//  ・BGM（01）
//  ・BPM変化（03 / 08）
//  ・STOP（09）
//  ・BGA（04, 06）
//  ・LN（長押し）
// ------------------------------------------------------------
struct Note
{
    // -------------------------
    // 時間情報（ms）
    // -------------------------
    double time_ms = 0.0;          // ノーツ開始時刻（ms）
    double end_time_ms = 0.0;      // LN終了時刻（ms、LNでのみ使用）

    // -------------------------
    // 譜面位置情報
    // -------------------------
    int measure = 0;               // 小節番号（0〜）
    double pos_raw = 0.0;          // 小節内の位置（0.0〜1.0）

    // -------------------------
    // チャンネル番号
    // 11〜19,21〜29 : キー音
    // 01 : BGM
    // 03 : BPM(旧式)
    // 08 : BPM(拡張)
    // 09 : STOP
    // 04 : BGA
    // 06 : LAYER
    // -------------------------
    int channel = 0;

    // -------------------------
    // ID情報
    //  Wav/Bmp/BPMxx/STOPxx の ID
    // -------------------------
    std::string wav_id;    // #WAVxx の xx（または BGM）
    std::string def_id;    // #BPMxx / #STOPxx の xx

    // -------------------------
    // LNメタ情報（BML対応）
    // -------------------------
    int end_measure = 0;    // LN終了小節番号
    double end_pos = 0.0;   // LN終了位置（0〜1）
};
